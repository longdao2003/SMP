<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng ký môn học</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/styles_1.css}">
    <style>
      
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

       
        table thead th {
            padding: 8px 10px;
            text-align: center;
            background-color: #007bff;
            color: white;
            border: 1px solid #ddd;
            white-space: nowrap;
        }

        
        table tbody td {
            padding: 6px 8px;
            text-align: center;
            border: 1px solid #ddd;
            white-space: nowrap;
        }

        
        table th:nth-child(1), table td:nth-child(1) { /* STT */
            width: 40px;
        }

        table th:nth-child(2), table td:nth-child(2) { /* Checkbox column */
            width: 30px;
        }

        table th:nth-child(3), table td:nth-child(3) { /* Mã MH */
            width: 80px;
        }

        table th:nth-child(4), table td:nth-child(4) { /* Tên môn học */
            width: 150px;
        }

        table th:nth-child(5), table td:nth-child(5) { /* Nhóm */
            width: 40px;
        }

        table th:nth-child(6), table td:nth-child(6) { /* Tổ */
            width: 50px;
        }

        table th:nth-child(7), table td:nth-child(7) { /* Số TC */
            width: 60px;
        }

        table th:nth-child(8), table td:nth-child(8) { /* Lớp */
            width: 80px;
        }

        table th:nth-child(9), table td:nth-child(9) { /* Số lượng */
            width: 60px;
        }

        table th:nth-child(10), table td:nth-child(10) { /* Số lượng còn lại */
            width: 80px;
        }

        table th:nth-child(11), table td:nth-child(11) { /* Thời khóa biểu */
            width: 200px;
        }

        /* Optional: Add hover effect for better usability */
        table tbody tr:hover {
            background-color: #f5f5f5;
        }
        table tbody tr.selected {
            background-color: #d3d3d3; /* Light gray color */
        }
    </style>
</head>
<body>
    <header>
        <div class="navbar">
            <span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16" style="margin: 0 0 -2 0;">
                <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
              </svg>
               <a href="dashboard1.html" style="text-decoration: none; color: aliceblue;"> Trang chủ </a>
            </span>
        </div>
    </header>

    <div class="container">
        <div class="left-content">
            <h2>Đăng ký môn học</h2>
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th>Mã MH</th>
                        <th>Tên môn học</th>
                        <th>Nhóm</th>
                        <th>Tổ</th>
                        <th>Số TC</th>
                        <th>Lớp</th>
                        <th>Số lượng </th>
                        <th>Thời khóa biểu</th>
                    </tr>
                </thead>
                <tbody id="subject-list">
                    <tr th:each="timetable, iterStat : ${listTimeTable}">
                        <td><input type="checkbox" name="" id=""></td>
                        <td th:text="${timetable.subject.id}"></td> 
                        <td th:text="${timetable.subject.name}"></td>
                        <td th:text="${timetable.code}"></td>
                        <td th:text="${timetable.code}"></td>
                        <td th:text="${timetable.subject.credits}"></td>
                        <td th:text="${timetable.classInfo.name}"></td>
                        <td th:text="${timetable.remainStudent}"></td>
                        <td th:utext="'Từ ' + ${timetable.period.startHour} + ', Đến ' + ${timetable.period.endHour}"></td>
                        
                    </tr>
                    
                      
                </tbody>
            </table>

            <button type="button" id="register-btn" class="register-btn" onclick="registerSubjects()">Đăng Ký</button>

            <h2>Danh sách môn học đã đăng ký</h2>
            <table>
                <thead>
                    <tr>
                        <th>Mã MH</th>
                        <th>Tên môn học</th>
                        <th>Nhóm</th>
                        <th>Tổ</th>
                        <th>Số TC</th>
                        <th>Lớp</th>
                        <th>Thời khóa biểu</th>
                        <th>Hành động</th>
                    </tr>
                </thead>
                <tbody id="registered-subject-list"i>
                   
                </tbody>
            </table>
        </div>

        <div class="right-sidebar">
            <div class="login-box">
                <h3>ĐĂNG NHẬP</h3>
                <p th:utext="${'Mã số  '+session.role+' :' + session.user.id}"></p>
                <p>Họ và tên: <span th:text="${session.name}"></span></p>
                <a th:href="@{/logout}" class="logout-btn">Đăng xuất</a>
            </div>

            <aside th:replace="~{layout/sidebar :: sidebar}"></aside>
            
        </div>
    </div>

    <script>
        // document.addEventListener("DOMContentLoaded", function () {
        //     const subjectList = document.getElementById("subject-list");
        //     const registeredSubjectList = document.getElementById("registered-subject-list");

        //     function loadSubjects() {
        //         // This function is now empty to remove pre-filled data
        //         // You can populate this table with data from a database later
        //         subjectList.innerHTML = "";
        //     }

        //     function loadRegisteredSubjects() {
        //         const registeredSubjects = JSON.parse(localStorage.getItem("registeredSubjectsFull")) || [];
        //         const savedSubjects = JSON.parse(localStorage.getItem("subjects")) || [];
        //         registeredSubjectList.innerHTML = "";
        //         registeredSubjects.forEach((subject) => {
        //             const row = document.createElement("tr");
        //             row.innerHTML = `
        //                 <td>${subject.subjectId}</td>
        //                 <td>${subject.subjectName}</td>
        //                 <td>${subject.group}</td>
        //                 <td>${subject.team}</td>
        //                 <td>${subject.credit}</td>
        //                 <td>${subject.class}</td>
        //                 <td>${subject.schedule}</td>
        //                 <td><button class="delete-btn" onclick="deleteRegisteredSubject('${subject.subjectId}')">Hủy</button></td>
        //             `;
        //             registeredSubjectList.appendChild(row);
        //         });
        //     }

        //     window.registerSubjects = function () {
        //         const checkboxes = document.querySelectorAll(".subject-checkbox:checked");
        //         let registeredSubjects = JSON.parse(localStorage.getItem("registeredSubjectsFull")) || [];

        //         checkboxes.forEach(checkbox => {
        //             const index = checkbox.getAttribute("data-index");
        //             const subject = JSON.parse(checkbox.getAttribute("data-subject"));
        //             if (subject && !registeredSubjects.some(s => s.subjectId === subject.subjectId)) {
        //                 registeredSubjects.push(subject);
        //             }
        //         });

        //         localStorage.setItem("registeredSubjectsFull", JSON.stringify(registeredSubjects));
        //         loadRegisteredSubjects();
        //         // Uncheck all checkboxes after registration
        //         document.querySelectorAll(".subject-checkbox").forEach(checkbox => checkbox.checked = false);
        //     };

        //     window.deleteRegisteredSubject = function (subjectId) {
        //         let registeredSubjects = JSON.parse(localStorage.getItem("registeredSubjectsFull")) || [];
        //         registeredSubjects = registeredSubjects.filter(subject => subject.subjectId !== subjectId);
        //         localStorage.setItem("registeredSubjectsFull", JSON.stringify(registeredSubjects));
        //         loadRegisteredSubjects();
        //     };

        //     loadSubjects();
        //     loadRegisteredSubjects();
        // });
    </script>
</body>
</html>